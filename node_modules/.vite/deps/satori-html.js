import "./chunk-UXIASGQL.js";

// node_modules/ultrahtml/dist/index.js
var L = 0;
var R = 1;
var k = 2;
var b = Symbol("Fragment");
var D = /* @__PURE__ */ new Set(["area", "base", "br", "col", "embed", "hr", "img", "input", "keygen", "link", "meta", "param", "source", "track", "wbr"]);
var x = /* @__PURE__ */ new Set(["script", "style"]);
var _ = /([\@\.a-z0-9_\:\-]*)\s*?=?\s*?(['"]?)([\s\S]*?)\2\s+/gim;
var s = /(?:<(\/?)([a-zA-Z][a-zA-Z0-9\:-]*)(?:\s([^>]*?))?((?:\s*\/)?)>|(<\!\-\-)([\s\S]*?)(\-\->)|(<\!)([\s\S]*?)(>))/gm;
function P(e) {
  let n = {}, a;
  if (e)
    for (_.lastIndex = 0, e = " " + (e || "") + " "; a = _.exec(e); )
      a[0] !== " " && (n[a[1]] = a[3]);
  return n;
}
function w(e) {
  let n = typeof e == "string" ? e : e.value, a, r, t, o, l, d3, g, h2, i, c2 = [];
  s.lastIndex = 0, r = a = { type: 0, children: [] };
  let E2 = 0;
  function m() {
    o = n.substring(E2, s.lastIndex - t[0].length), o && r.children.push({ type: 2, value: o, parent: r });
  }
  for (; t = s.exec(n); ) {
    if (d3 = t[5] || t[8], g = t[6] || t[9], h2 = t[7] || t[10], x.has(r.name) && t[2] !== r.name) {
      l = s.lastIndex - t[0].length, r.children.length > 0 && (r.children[0].value += t[0]);
      continue;
    } else if (d3 === "<!--") {
      if (l = s.lastIndex - t[0].length, x.has(r.name))
        continue;
      i = { type: 3, value: g, parent: r, loc: [{ start: l, end: l + d3.length }, { start: s.lastIndex - h2.length, end: s.lastIndex }] }, c2.push(i), i.parent.children.push(i);
    } else if (d3 === "<!")
      l = s.lastIndex - t[0].length, i = { type: 4, value: g, parent: r, loc: [{ start: l, end: l + d3.length }, { start: s.lastIndex - h2.length, end: s.lastIndex }] }, c2.push(i), i.parent.children.push(i);
    else if (t[1] !== "/")
      if (m(), x.has(r.name)) {
        E2 = s.lastIndex, m();
        continue;
      } else
        i = { type: 1, name: t[2] + "", attributes: P(t[3]), parent: r, children: [], loc: [{ start: s.lastIndex - t[0].length, end: s.lastIndex }] }, c2.push(i), i.parent.children.push(i), t[4] && t[4].indexOf("/") > -1 || D.has(i.name) ? (i.loc[1] = i.loc[0], i.isSelfClosingTag = true) : r = i;
    else
      m(), t[2] + "" === r.name ? (i = r, r = i.parent, i.loc.push({ start: s.lastIndex - t[0].length, end: s.lastIndex }), o = n.substring(i.loc[0].end, i.loc[1].start), i.children.length === 0 && i.children.push({ type: 2, value: o, parent: r })) : t[2] + "" === c2[c2.length - 1].name && c2[c2.length - 1].isSelfClosingTag === true && (i = c2[c2.length - 1], i.loc.push({ start: s.lastIndex - t[0].length, end: s.lastIndex }));
    E2 = s.lastIndex;
  }
  return o = n.slice(E2), r.children.push({ type: 2, value: o, parent: r }), a;
}
var O = class {
  constructor(n) {
    this.callback = n;
  }
  visit(n, a, r) {
    if (this.callback(n, a, r), Array.isArray(n.children))
      for (let t = 0; t < n.children.length; t++) {
        let o = n.children[t];
        this.visit(o, n, t);
      }
  }
};
var N = Symbol("HTMLString");
var S = Symbol("AttrString");
var u = Symbol("RenderFn");
function f(e, n = [N]) {
  let a = { value: e };
  for (let r of n)
    Object.defineProperty(a, r, { value: true, enumerable: false, writable: false });
  return a;
}
var I = { "&": "&amp;", "<": "&lt;", ">": "&gt;" };
function y(e) {
  return e.replace(/[&<>]/g, (n) => I[n] || n);
}
function p(e) {
  let n = "";
  for (let [a, r] of Object.entries(e))
    n += ` ${a}="${r}"`;
  return f(n, [N, S]);
}
function Y(e, ...n) {
  let a = "";
  for (let r = 0; r < e.length; r++) {
    a += e[r];
    let t = n[r];
    a.endsWith("...") && t && typeof t == "object" ? (a = a.slice(0, -3).trimEnd(), a += p(t).value) : t && t[S] ? (a = a.trimEnd(), a += t.value) : t && t[N] ? a += t.value : typeof t == "string" ? a += y(t) : (t || t === 0) && (a += String(t));
  }
  return f(a);
}
function H(e, n) {
  return new O(n).visit(e);
}

// node_modules/ultrahtml/dist/selector.js
var b2 = { attribute: /\[\s*(?:(?<namespace>\*|[-\w]*)\|)?(?<name>[-\w\u{0080}-\u{FFFF}]+)\s*(?:(?<operator>\W?=)\s*(?<value>.+?)\s*(?<caseSensitive>[iIsS])?\s*)?\]/gu, id: /#(?<name>(?:[-\w\u{0080}-\u{FFFF}]|\\.)+)/gu, class: /\.(?<name>(?:[-\w\u{0080}-\u{FFFF}]|\\.)+)/gu, comma: /\s*,\s*/g, combinator: /\s*[\s>+~]\s*/g, "pseudo-element": /::(?<name>[-\w\u{0080}-\u{FFFF}]+)(?:\((?<argument>¶+)\))?/gu, "pseudo-class": /:(?<name>[-\w\u{0080}-\u{FFFF}]+)(?:\((?<argument>¶+)\))?/gu, type: /(?:(?<namespace>\*|[-\w]*)\|)?(?<name>[-\w\u{0080}-\u{FFFF}]+)|\*/gu };
var T = /* @__PURE__ */ new Set(["pseudo-class", "pseudo-element"]);
var C = /* @__PURE__ */ new Set([...T, "attribute"]);
var I2 = /* @__PURE__ */ new Set(["combinator", "comma"]);
var E = /* @__PURE__ */ new Set(["not", "is", "where", "has", "matches", "-moz-any", "-webkit-any", "nth-child", "nth-last-child"]);
var M = { "nth-child": /(?<index>[\dn+-]+)\s+of\s+(?<subtree>.+)/ };
E["nth-last-child"] = M["nth-child"];
var w2 = Object.assign({}, b2);
function R2(t, r) {
  let e = "", n = [];
  for (; r < t.length; r++) {
    let s2 = t[r];
    if (s2 === "(")
      n.push(s2);
    else if (s2 === ")") {
      if (!(n.length > 0))
        throw new Error("Closing paren without opening paren at " + r);
      n.pop();
    }
    if (e += s2, n.length === 0)
      return e;
  }
  throw new Error("Opening paren without closing paren");
}
function k2(t, r) {
  if (!t)
    return [];
  var e = [t];
  for (var n in r) {
    let u2 = r[n];
    for (var s2 = 0; s2 < e.length; s2++) {
      var o = e[s2];
      if (typeof o == "string") {
        u2.lastIndex = 0;
        var a = u2.exec(o);
        if (a) {
          let l = a.index - 1, c2 = [], f2 = a[0], m = o.slice(0, l + 1);
          m && c2.push(m), c2.push({ type: n, content: f2, ...a.groups });
          let g = o.slice(l + f2.length + 1);
          g && c2.push(g), e.splice(s2, 1, ...c2);
        }
      }
    }
  }
  let i = 0;
  for (let u2 = 0; u2 < e.length; u2++) {
    let l = e[u2], c2 = l.length || l.content.length;
    typeof l == "object" && (l.pos = [i, i + c2], I2.has(l.type) && (l.content = l.content.trim() || " ")), i += c2;
  }
  return e;
}
function A(t) {
  if (!t)
    return null;
  t = t.trim();
  let r = [];
  t = t.replace(/(['"])(\\\1|.)+?\1/g, (i, u2, l, c2) => (r.push({ str: i, start: c2 }), u2 + "§".repeat(l.length) + u2));
  let e, n = [], s2 = 0;
  for (; (e = t.indexOf("(", s2)) > -1; ) {
    let i = R2(t, e);
    n.push({ str: i, start: e }), t = t.substring(0, e) + "(" + "¶".repeat(i.length - 2) + ")" + t.substring(e + i.length), s2 = e + i.length;
  }
  let o = k2(t, b2);
  function a(i, u2, l) {
    for (let c2 of i)
      for (let f2 of o)
        if (l.has(f2.type) && f2.pos[0] < c2.start && c2.start < f2.pos[1]) {
          let m = f2.content;
          if (f2.content = f2.content.replace(u2, c2.str), f2.content !== m) {
            w2[f2.type].lastIndex = 0;
            let g = w2[f2.type].exec(f2.content).groups;
            Object.assign(f2, g);
          }
        }
  }
  return a(n, /\(¶+\)/, T), a(r, /(['"])§+?\1/, C), o;
}
function N2(t, { list: r = true } = {}) {
  if (r && t.find((e) => e.type === "comma")) {
    let e = [], n = [];
    for (let s2 = 0; s2 < t.length; s2++)
      if (t[s2].type === "comma") {
        if (n.length === 0)
          throw new Error("Incorrect comma at " + s2);
        e.push(N2(n, { list: false })), n.length = 0;
      } else
        n.push(t[s2]);
    if (n.length === 0)
      throw new Error("Trailing comma");
    return e.push(N2(n, { list: false })), { type: "list", list: e };
  }
  for (let e = t.length - 1; e >= 0; e--) {
    let n = t[e];
    if (n.type === "combinator") {
      let s2 = t.slice(0, e), o = t.slice(e + 1);
      return { type: "complex", combinator: n.content, left: N2(s2), right: N2(o) };
    }
  }
  return t.length === 0 ? null : t.length === 1 ? t[0] : { type: "compound", list: [...t] };
}
function p2(t, r, e, n) {
  if (t) {
    if (t.type === "complex")
      p2(t.left, r, e, t), p2(t.right, r, e, t);
    else if (t.type === "compound")
      for (let s2 of t.list)
        p2(s2, r, e, t);
    else
      t.subtree && e && e.subtree && p2(t.subtree, r, e, t);
    r(t, n);
  }
}
function y2(t, { recursive: r = true, list: e = true } = {}) {
  let n = A(t);
  if (!n)
    return null;
  let s2 = N2(n, { list: e });
  return r && p2(s2, (o) => {
    if (o.type === "pseudo-class" && o.argument && E.has(o.name)) {
      let a = o.argument, i = M[o.name];
      if (i) {
        let u2 = i.exec(a);
        if (!u2)
          return;
        Object.assign(o, u2.groups), a = u2.groups.subtree;
      }
      a && (o.subtree = y2(a, { recursive: true, list: true }));
    }
  }), s2;
}
function F(t, r) {
  return r = r || Math.max(...t) + 1, t[0] * r ** 2 + t[1] * r + t[2];
}
function x2(t, { format: r = "array" } = {}) {
  let e = typeof t == "object" ? t : y2(t, { recursive: true });
  if (!e)
    return null;
  if (e.type === "list") {
    let s2 = 10, o = e.list.map((i) => {
      let u2 = x2(i);
      return s2 = Math.max(s2, ...u2), u2;
    }), a = o.map((i) => F(i, s2));
    return o[function(i) {
      let u2 = i[0], l = 0;
      for (let c2 = 0; c2 < i.length; c2++)
        i[c2] > u2 && (l = c2, u2 = i[c2]);
      return i.length === 0 ? -1 : l;
    }(a)];
  }
  let n = [0, 0, 0];
  return p2(e, (s2) => {
    s2.type === "id" ? n[0]++ : s2.type === "class" || s2.type === "attribute" ? n[1]++ : s2.type === "type" && s2.content !== "*" || s2.type === "pseudo-element" ? n[2]++ : s2.type === "pseudo-class" && s2.name !== "where" && (E.has(s2.name) && s2.subtree ? x2(s2.subtree).forEach((o, a) => n[a] += o) : n[1]++);
  }), n;
}
w2["pseudo-element"] = RegExp(b2["pseudo-element"].source.replace("(?<argument>¶+)", "(?<argument>.+?)"), "gu"), w2["pseudo-class"] = RegExp(b2["pseudo-class"].source.replace("(?<argument>¶+)", "(?<argument>.+)"), "gu");
function B(t) {
  return F(x2(t));
}
function U(t, r) {
  let e = d(r);
  return O2(t, (n, s2, o) => {
    let a = e(n, s2, o);
    return a || false;
  });
}
function O2(t, r, e = { single: false }) {
  let n = [];
  return H(t, (s2, o, a) => {
    if (!(s2 && s2.type !== R) && r(s2, o, a)) {
      if (e.single)
        throw s2;
      n.push(s2);
    }
  }), n;
}
var L2 = (t) => {
  let { operator: r = "=" } = t;
  switch (r) {
    case "=":
      return (e, n) => e === n;
    case "~=":
      return (e, n) => e.split(/\s+/g).includes(n);
    case "|=":
      return (e, n) => e.startsWith(n + "-");
    case "*=":
      return (e, n) => e.indexOf(n) > -1;
    case "$=":
      return (e, n) => e.endsWith(n);
    case "^=":
      return (e, n) => e.startsWith(n);
  }
  return (e, n) => false;
};
var v = (t, r) => r == null ? void 0 : r.children.filter((e) => e.type === R).findIndex((e) => e === t);
var W = (t) => {
  let [r, e = "1", n = "0"] = /^\s*(?:(-?(?:\d+)?)n)?\s*\+?\s*(\d+)?\s*$/gm.exec(t) ?? [];
  e.length === 0 && (e = "1");
  let s2 = Number.parseInt(e === "-" ? "-1" : e), o = Number.parseInt(n);
  return (a) => s2 * a + o;
};
var D2 = (t, r) => (r == null ? void 0 : r.children.filter((e) => e.type === R).pop()) === t;
var $ = (t, r) => (r == null ? void 0 : r.children.filter((e) => e.type === R).shift()) === t;
var z = (t, r) => (r == null ? void 0 : r.children.filter((e) => e.type === R).length) === 1;
var S2 = (t) => {
  switch (t.type) {
    case "type":
      return (r) => t.content === "*" ? true : r.name === t.name;
    case "class":
      return (r) => {
        var e, n;
        return (n = (e = r.attributes) == null ? void 0 : e.class) == null ? void 0 : n.split(/\s+/g).includes(t.name);
      };
    case "id":
      return (r) => {
        var e;
        return ((e = r.attributes) == null ? void 0 : e.id) === t.name;
      };
    case "pseudo-class":
      switch (t.name) {
        case "global":
          return (...r) => d(y2(t.argument))(...r);
        case "not":
          return (...r) => !S2(t.subtree)(...r);
        case "is":
          return (...r) => d(t.subtree)(...r);
        case "where":
          return (...r) => d(t.subtree)(...r);
        case "root":
          return (r, e) => r.type === R && r.name === "html";
        case "empty":
          return (r) => r.type === R && (r.children.length === 0 || r.children.every((e) => e.type === k && e.value.trim() === ""));
        case "first-child":
          return (r, e) => $(r, e);
        case "last-child":
          return (r, e) => D2(r, e);
        case "only-child":
          return (r, e) => z(r, e);
        case "nth-child":
          return (r, e) => {
            let n = v(r, e) + 1;
            if (Number.isNaN(Number(t.argument)))
              switch (t.argument) {
                case "odd":
                  return Math.abs(n % 2) == 1;
                case "even":
                  return n % 2 === 0;
                default: {
                  if (!t.argument)
                    throw new Error("Unsupported empty nth-child selector!");
                  let s2 = W(t.argument), o = e == null ? void 0 : e.children.filter((i) => i.type === R), a = v(r, e) + 1;
                  for (let i = 0; i < o.length; i++) {
                    let u2 = s2(i);
                    if (u2 > o.length)
                      return false;
                    if (u2 === a)
                      return true;
                  }
                  return false;
                }
              }
            return n === Number(t.argument);
          };
        default:
          throw new Error(`Unhandled pseudo-class: ${t.name}!`);
      }
    case "attribute":
      return (r) => {
        let { caseSensitive: e, name: n, value: s2 } = t;
        if (!r.attributes)
          return false;
        let o = Object.entries(r.attributes);
        for (let [a, i] of o)
          if (e === "i" && (s2 = n.toLowerCase(), i = a.toLowerCase()), a === n) {
            if (!s2)
              return true;
            if ((s2[0] === '"' || s2[0] === "'") && s2[0] === s2[s2.length - 1] && (s2 = JSON.parse(s2)), s2)
              return L2(t)(i, s2);
          }
        return false;
      };
    default:
      throw new Error(`Unhandled selector: ${t.type}`);
  }
};
var d = (t) => {
  let r = typeof t == "string" ? y2(t) : t;
  switch (r.type) {
    case "list": {
      let e = r.list.map((n) => S2(n));
      return (n, s2, o) => {
        for (let a of e)
          if (a(n, s2))
            return true;
        return false;
      };
    }
    case "compound": {
      let e = r.list.map((n) => S2(n));
      return (n, s2, o) => {
        for (let a of e)
          if (!a(n, s2))
            return false;
        return true;
      };
    }
    case "complex": {
      let { left: e, right: n, combinator: s2 } = r, o = d(e), a = d(n), i = /* @__PURE__ */ new WeakSet();
      return (u2, l, c2 = 0) => {
        if ((o(u2) || l && i.has(l) && s2 === " ") && i.add(u2), !a(u2))
          return false;
        switch (s2) {
          case " ":
          case ">":
            return l ? i.has(l) : false;
          case "~": {
            if (!l)
              return false;
            for (let f2 of l.children.slice(0, c2))
              if (i.has(f2))
                return true;
            return false;
          }
          case "+": {
            if (!l)
              return false;
            let f2 = l.children.slice(0, c2).filter((g) => g.type === R);
            if (f2.length === 0)
              return false;
            let m = f2[f2.length - 1];
            if (!m)
              return false;
            if (i.has(m))
              return true;
          }
          default:
            return false;
        }
      };
    }
    default:
      return S2(r);
  }
};

// node_modules/ultrahtml/dist/transformers/inline.js
var Y2 = "comm";
var q = "rule";
var B2 = "decl";
var G = Math.abs;
var C2 = String.fromCharCode;
function D3(e) {
  return e.trim();
}
function P2(e, r, a) {
  return e.replace(r, a);
}
function X(e, r) {
  return e.indexOf(r);
}
function M2(e, r) {
  return e.charCodeAt(r) | 0;
}
function A2(e, r, a) {
  return e.slice(r, a);
}
function O3(e) {
  return e.length;
}
function Z(e) {
  return e.length;
}
function R3(e, r) {
  return r.push(e), e;
}
var _2 = 1;
var S3 = 1;
var J = 0;
var h = 0;
var c = 0;
var j = "";
function z2(e, r, a, p3, u2, E2, w3) {
  return { value: e, root: r, parent: a, type: p3, props: u2, children: E2, line: _2, column: S3, length: w3, return: "" };
}
function Q() {
  return c;
}
function ee() {
  return c = h > 0 ? M2(j, --h) : 0, S3--, c === 10 && (S3 = 1, _2--), c;
}
function d2() {
  return c = h < J ? M2(j, h++) : 0, S3++, c === 10 && (S3 = 1, _2++), c;
}
function T2() {
  return M2(j, h);
}
function I3() {
  return h;
}
function F2(e, r) {
  return A2(j, e, r);
}
function H2(e) {
  switch (e) {
    case 0:
    case 9:
    case 10:
    case 13:
    case 32:
      return 5;
    case 33:
    case 43:
    case 44:
    case 47:
    case 62:
    case 64:
    case 126:
    case 59:
    case 123:
    case 125:
      return 4;
    case 58:
      return 3;
    case 34:
    case 39:
    case 40:
    case 91:
      return 2;
    case 41:
    case 93:
      return 1;
  }
  return 0;
}
function re(e) {
  return _2 = S3 = 1, J = O3(j = e), h = 0, [];
}
function te(e) {
  return j = "", e;
}
function $2(e) {
  return D3(F2(h - 1, K(e === 91 ? e + 2 : e === 40 ? e + 1 : e)));
}
function ne(e) {
  for (; (c = T2()) && c < 33; )
    d2();
  return H2(e) > 2 || H2(c) > 3 ? "" : " ";
}
function oe(e, r) {
  for (; --r && d2() && !(c < 48 || c > 102 || c > 57 && c < 65 || c > 70 && c < 97); )
    ;
  return F2(e, I3() + (r < 6 && T2() == 32 && d2() == 32));
}
function K(e) {
  for (; d2(); )
    switch (c) {
      case e:
        return h;
      case 34:
      case 39:
        e !== 34 && e !== 39 && K(c);
        break;
      case 40:
        e === 41 && K(e);
        break;
      case 92:
        d2();
        break;
    }
  return h;
}
function ae(e, r) {
  for (; d2() && e + c !== 47 + 10; )
    if (e + c === 42 + 42 && T2() === 47)
      break;
  return "/*" + F2(r, h - 1) + "*" + C2(e === 47 ? e : d2());
}
function ce(e) {
  for (; !H2(T2()); )
    d2();
  return F2(e, h);
}
function V(e) {
  return te(W2("", null, null, null, [""], e = re(e), 0, [0], e));
}
function W2(e, r, a, p3, u2, E2, w3, m, k3) {
  for (var n = 0, f2 = 0, t = w3, s2 = 0, i = 0, l = 0, b3 = 1, L3 = 1, v2 = 1, x3 = 0, N3 = "", U2 = u2, y3 = E2, g = p3, o = N3; L3; )
    switch (l = x3, x3 = d2()) {
      case 40:
        if (l != 108 && M2(o, t - 1) == 58) {
          X(o += P2($2(x3), "&", "&\f"), "&\f") != -1 && (v2 = -1);
          break;
        }
      case 34:
      case 39:
      case 91:
        o += $2(x3);
        break;
      case 9:
      case 10:
      case 13:
      case 32:
        o += ne(l);
        break;
      case 92:
        o += oe(I3() - 1, 7);
        continue;
      case 47:
        switch (T2()) {
          case 42:
          case 47:
            R3(pe(ae(d2(), I3()), r, a), k3);
            break;
          default:
            o += "/";
        }
        break;
      case 123 * b3:
        m[n++] = O3(o) * v2;
      case 125 * b3:
      case 59:
      case 0:
        switch (x3) {
          case 0:
          case 125:
            L3 = 0;
          case 59 + f2:
            i > 0 && O3(o) - t && R3(i > 32 ? ie(o + ";", p3, a, t - 1) : ie(P2(o, " ", "") + ";", p3, a, t - 2), k3);
            break;
          case 59:
            o += ";";
          default:
            if (R3(g = se(o, r, a, n, f2, u2, m, N3, U2 = [], y3 = [], t), E2), x3 === 123)
              if (f2 === 0)
                W2(o, r, g, g, U2, E2, t, m, y3);
              else
                switch (s2) {
                  case 100:
                  case 109:
                  case 115:
                    W2(e, g, g, p3 && R3(se(e, g, g, 0, 0, u2, m, N3, u2, U2 = [], t), y3), u2, y3, t, m, p3 ? U2 : y3);
                    break;
                  default:
                    W2(o, g, g, g, [""], y3, 0, m, y3);
                }
        }
        n = f2 = i = 0, b3 = v2 = 1, N3 = o = "", t = w3;
        break;
      case 58:
        t = 1 + O3(o), i = l;
      default:
        if (b3 < 1) {
          if (x3 == 123)
            --b3;
          else if (x3 == 125 && b3++ == 0 && ee() == 125)
            continue;
        }
        switch (o += C2(x3), x3 * b3) {
          case 38:
            v2 = f2 > 0 ? 1 : (o += "\f", -1);
            break;
          case 44:
            m[n++] = (O3(o) - 1) * v2, v2 = 1;
            break;
          case 64:
            T2() === 45 && (o += $2(d2())), s2 = T2(), f2 = t = O3(N3 = o += ce(I3())), x3++;
            break;
          case 45:
            l === 45 && O3(o) == 2 && (b3 = 0);
        }
    }
  return E2;
}
function se(e, r, a, p3, u2, E2, w3, m, k3, n, f2) {
  for (var t = u2 - 1, s2 = u2 === 0 ? E2 : [""], i = Z(s2), l = 0, b3 = 0, L3 = 0; l < p3; ++l)
    for (var v2 = 0, x3 = A2(e, t + 1, t = G(b3 = w3[l])), N3 = e; v2 < i; ++v2)
      (N3 = D3(b3 > 0 ? s2[v2] + " " + x3 : P2(x3, /&\f/g, s2[v2]))) && (k3[L3++] = N3);
  return z2(e, r, a, u2 === 0 ? q : m, k3, n, f2);
}
function pe(e, r, a) {
  return z2(e, r, a, Y2, C2(Q()), A2(e, 2, -2), 0);
}
function ie(e, r, a, p3) {
  return z2(e, r, a, B2, A2(e, 0, p3), A2(e, p3 + 1, -1), p3);
}
function he(e) {
  let { useObjectSyntax: r = false } = e ?? {};
  return (a) => {
    let p3 = r ? [":where([style]) {}"] : [], u2 = [];
    H(a, (n, f2) => {
      n.type === R && n.name === "style" && (p3.push(n.children.map((t) => t.type === k ? t.value : "").join("")), u2.push(() => {
        f2.children = f2.children.filter((t) => t !== n);
      }));
    });
    for (let n of u2)
      n();
    let E2 = p3.join(`
`), w3 = V(E2), m = /* @__PURE__ */ new Map();
    for (let n of w3)
      if (n.type === "rule") {
        let f2 = Object.fromEntries(n.children.map((t) => [t.props, t.children]));
        for (let t of n.props) {
          let s2 = Object.assign(m.get(t) ?? {}, f2);
          m.set(t, s2);
        }
      }
    let k3 = /* @__PURE__ */ new Map();
    for (let [n, f2] of Array.from(m).sort(([t], [s2]) => {
      let i = B(t), l = B(s2);
      return i > l ? 1 : l > i ? -1 : 0;
    })) {
      let t = U(a, n);
      for (let s2 of t) {
        let i = k3.get(s2) ?? {};
        k3.set(s2, Object.assign(i, f2));
      }
    }
    for (let [n, f2] of k3) {
      let t = n.attributes.style ?? "", s2 = {};
      for (let i of V(t))
        i.type === "decl" && typeof i.props == "string" && typeof i.children == "string" && (s2[i.props] = i.children);
      s2 = Object.assign({}, f2, s2), r ? n.attributes.style = s2 : n.attributes.style = `${Object.entries(s2).map(([i, l]) => `${i}:${l.replace("!important", "")};`).join("")}`;
    }
    return a;
  };
}

// node_modules/satori-html/dist/index.js
var TW_NAMES = /* @__PURE__ */ new Set([
  /[mp](t|b|r|l|x|y)?-/,
  `color-`,
  `flex`,
  `h-`,
  `w-`,
  `min-w-`,
  `min-h-`,
  `max-w-`,
  `max-h-`,
  `leading-`,
  `text-`,
  `opacity-`,
  `font-`,
  `aspect-`,
  `tint-`,
  `bg-`,
  `opacity-`,
  `shadow-`,
  `rounded`,
  `top-`,
  `right-`,
  `bottom-`,
  `left-`,
  `inset-`,
  `border`,
  `elevation-`,
  `tracking-`,
  `z-`
]);
var inliner = he({ useObjectSyntax: true });
var tw = (doc) => {
  H(doc, (node) => {
    if (node.type !== R)
      return;
    if (node.attributes.class && !node.attributes.tw) {
      const classNames = node.attributes.class.split(/\s+/);
      let match = false;
      for (const name of TW_NAMES) {
        if (match)
          break;
        for (const item of classNames) {
          if (match)
            break;
          if (item.indexOf(":") > -1) {
            match = true;
          } else if (typeof name === "string") {
            match = item.startsWith(name);
          } else {
            match = name.test(item);
          }
        }
      }
      if (match) {
        node.attributes.tw = node.attributes.class;
      }
    }
  });
};
var camelize = (ident) => ident.replace(/-([a-z])/g, (_3, char) => char.toUpperCase());
function html(templates, ...expressions) {
  const result = Y.call(null, templates, ...expressions);
  let doc = w(result.value.trim());
  inliner(doc);
  tw(doc);
  const nodeMap = /* @__PURE__ */ new WeakMap();
  let root = {
    type: "div",
    props: {
      style: {
        display: "flex",
        flexDirection: "column",
        width: "100%",
        height: "100%"
      },
      children: []
    }
  };
  H(doc, (node, parent, index) => {
    let newNode = {};
    if (node.type === L) {
      nodeMap.set(node, root);
    } else if (node.type === R) {
      newNode.type = node.name;
      const { style, "": _3, ...props } = node.attributes;
      if (typeof style === "object") {
        props["style"] = {};
        for (const [decl, value] of Object.entries(style)) {
          props["style"][camelize(decl)] = value;
        }
      }
      props.children = [];
      Object.assign(newNode, { props });
      nodeMap.set(node, newNode);
      if (parent) {
        const newParent = nodeMap.get(parent);
        newParent.props.children[index] = newNode;
      }
    } else if (node.type === k) {
      newNode = node.value.trim();
      if (newNode.trim()) {
        if (parent) {
          const newParent = nodeMap.get(parent);
          if (parent.children.length === 1) {
            newParent.props.children = newNode;
          } else {
            newParent.props.children[index] = newNode;
          }
        }
      }
    }
  });
  return root;
}
export {
  html
};
//# sourceMappingURL=satori-html.js.map
